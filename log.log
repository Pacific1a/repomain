/root/.pm2/logs/duo-bot-error-7.log last 100 lines:
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 164, in feed_update
7|duo-bot  |     response = await self.update.wrap_outer_middleware(
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/middlewares/middleware_users.py", line 25, in __call__
7|duo-bot  |     Userx.add(user_id, user_login.lower(), user_name)
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/database/db_users.py", line 44, in add
7|duo-bot  |     con.execute(
7|duo-bot  | sqlite3.OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | ERROR | 14-01-2026 21:34:14 | dispatcher.py:325 | Cause exception while process update id=235051113 by bot id=7716009607
7|duo-bot  | OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | Traceback (most recent call last):
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 320, in _process_update
7|duo-bot  |     response = await self.feed_update(bot, update, **kwargs)
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 164, in feed_update
7|duo-bot  |     response = await self.update.wrap_outer_middleware(
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/middlewares/middleware_users.py", line 25, in __call__
7|duo-bot  |     Userx.add(user_id, user_login.lower(), user_name)
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/database/db_users.py", line 44, in add
7|duo-bot  |     con.execute(
7|duo-bot  | sqlite3.OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | ERROR | 14-01-2026 21:34:14 | dispatcher.py:325 | Cause exception while process update id=235051114 by bot id=7716009607
7|duo-bot  | OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | Traceback (most recent call last):
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 320, in _process_update
7|duo-bot  |     response = await self.feed_update(bot, update, **kwargs)
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 164, in feed_update
7|duo-bot  |     response = await self.update.wrap_outer_middleware(
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await 7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/middlewares/middleware_users.py", line 25, in __call__
7|duo-bot  |     Userx.add(user_id, user_login.lower(), user_name)
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/database/db_users.py", line 44, in add
7|duo-bot  |     con.execute(
7|duo-bot  | sqlite3.OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | ERROR | 14-01-2026 21:34:14 | dispatcher.py:325 | Cause exception while process update id=235051113 by bot id=7716009607
7|duo-bot  | OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | Traceback (most recent call last):
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 320, in _process_update
7|duo-bot  |     response = await self.feed_update(bot, update, **kwargs)
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 164, in feed_update
7|duo-bot  |     response = await self.update.wrap_outer_middleware(
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/middlewares/middleware_users.py", line 25, in __call__
7|duo-bot  |     Userx.add(user_id, user_login.lower(), user_name)
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/database/db_users.py", line 44, in add
7|duo-bot  |     con.execute(
7|duo-bot  | sqlite3.OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | ERROR | 14-01-2026 21:34:14 | dispatcher.py:325 | Cause exception while process update id=235051114 by bot id=7716009607
7|duo-bot  | OperationalError: table storage_users has no column named user_referrer
7|duo-bot  | Traceback (most recent call last):
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 320, in _process_update
7|duo-bot  |     response = await self.feed_update(bot, update, **kwargs)
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 164, in feed_update
7|duo-bot  |     response = await self.update.wrap_outer_middleware(
7|duo-bot  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/error.py", line 27, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/middlewares/user_context.py", line 58, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/fsm/middleware.py", line 43, in __call__
7|duo-bot  |     return await handler(event, data)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/telegram.py", line 126, in trigger
7|duo-bot  |     return await wrapped_inner(event, kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/event/handler.py", line 71, in call
7|duo-bot  |     return await wrapped()
7|duo-bot  |            ^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/dispatcher.py", line 283, in _listen_update
7|duo-bot  |     return await self.propagate_event(update_type=update_type, event=event, **kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/venv/lib/python3.12/site-packages/aiogram/dispatcher/router.py", line 161, in propagate_event
7|duo-bot  |     return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
7|duo-bot  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/middlewares/middleware_users.py", line 25, in __call__
7|duo-bot  |     Userx.add(user_id, user_login.lower(), user_name)
7|duo-bot  |   File "/var/www/duo/bot/autoshop/tgbot/database/db_users.py", line 44, in add
7|duo-bot  |     con.execute(
7|duo-bot  | sqlite3.OperationalError: table storage_users has no column named user_referrer

root@duos:~#