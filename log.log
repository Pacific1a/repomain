Run `npm audit` for details.
root@duos:/var/www/duo/withdrawal-bot# cd /var/www/duo/withdrawal-bot
root@duos:/var/www/duo/withdrawal-bot# cp .env.example .env
root@duos:/var/www/duo/withdrawal-bot# nano .env
root@duos:/var/www/duo/withdrawal-bot# root@duos:/var/www/duo/withdrawal-bot# cd /var/www/duo
root@duos:/var/www/duo#      git pull origin main
remote: Enumerating objects: 9, done.
remote: Counting objects: 100% (9/9), done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 5 (delta 3), reused 5 (delta 3), pack-reused 0 (from 0)
Unpacking objects: 100% (5/5), 1.94 KiB | 331.00 KiB/s, done.
From https://github.com/Pacific1a/repomain
 * branch            main       -> FETCH_HEAD
   1aa20ea..d0b5f00  main       -> origin/main
Updating 1aa20ea..d0b5f00
Fast-forward
 withdrawal-bot/.env.example |  5 +++++
 withdrawal-bot/index.js     | 35 ++++++++++++++++++++++-------------
 2 files changed, 27 insertions(+), 13 deletions(-)
root@duos:/var/www/duo# cd server
root@duos:/var/www/duo/server#      node migrations/add-withdrawal-requests.js
� Начинаем миграцию: добавление таблицы withdrawal_requests...

� База данных: /var/www/duo/server/data/database.db
✅ Подключение к базе данных установлено

✅ Таблица withdrawal_requests создана
✅ Индексы созданы

✅ Миграция успешно завершена!

� Структура таблицы:
   - id: уникальный ID заявки
   - user_id: ID пользователя
   - email: email пользователя
   - telegram_username: @username из Telegram
   - amount: сумма вывода
   - usdt_address: USDT TRC20 адрес
   - referrals_count: сколько рефералов
   - total_earnings: сколько заработал
   - status: pending/approved/rejected
   - created_at: дата создания
   - processed_at: дата обработки
   - processed_by: кто обработал
   - telegram_message_id: ID сообщения в боте
   - admin_comment: комментарий админа

✅ Соединение с БД закрыто
root@duos:/var/www/duo/server#  cd ../withdrawal-bot
root@duos:/var/www/duo/withdrawal-bot#      npm install

up to date, audited 257 packages in 1s

83 packages are looking for funding
  run `npm fund` for details

8 vulnerabilities (2 moderate, 4 high, 2 critical)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
root@duos:/var/www/duo/withdrawal-bot# pm2 start index.js --name withdrawal-bot
save[PM2] Starting /var/www/duo/withdrawal-bot/index.js in fork_mode (1 instance)
[PM2] Done.
┌────┬───────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name              │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼───────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 1  │ duo-bot           │ default     │ N/A     │ fork    │ 679746   │ 6D     │ 224… │ online    │ 0%       │ 108.7mb  │ root     │ disabled │
│ 0  │ duo-server        │ default     │ 2.0.0   │ fork    │ 805442   │ 26h    │ 159  │ online    │ 0%       │ 80.1mb   │ root     │ disabled │
│ 2  │ withdrawal-bot    │ default     │ 1.0.0   │ fork    │ 836261   │ 0s     │ 0    │ online    │ 0%       │ 31.1mb   │ root     │ disabled │
└────┴───────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo/withdrawal-bot#      pm2 save
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@duos:/var/www/duo/withdrawal-bot# pm2 start index.js --name withdrawal-bot
save
[PM2][ERROR] Script already launched, add -f option to force re-execution
root@duos:/var/www/duo/withdrawal-bot#      pm2 save
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@duos:/var/www/duo/withdrawal-bot# pm2 restart duo-server
Use --update-env to update environment variables
[PM2] Applying action restartProcessId on app [duo-server](ids: [ 0 ])
[PM2] [duo-server](0) ✓
┌────┬───────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name              │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼───────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 1  │ duo-bot           │ default     │ N/A     │ fork    │ 679746   │ 6D     │ 224… │ online    │ 0%       │ 108.7mb  │ root     │ disabled │
│ 0  │ duo-server        │ default     │ 2.0.0   │ fork    │ 836506   │ 0s     │ 160  │ online    │ 0%       │ 30.1mb   │ root     │ disabled │
│ 2  │ withdrawal-bot    │ default     │ 1.0.0   │ fork    │ 0        │ 0      │ 15   │ errored   │ 0%       │ 0b       │ root     │ disabled │
└────┴───────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo/withdrawal-bot# pm2 logs withdrawal-bot --lines 50
[TAILING] Tailing last 50 lines for [withdrawal-bot] process (change the value with --lines option)
/root/.pm2/logs/withdrawal-bot-out.log last 50 lines:
/root/.pm2/logs/withdrawal-bot-error.log last 50 lines:
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env
2|withdraw | ❌ CHAT_ID не настроен в .env

