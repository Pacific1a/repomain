# üß™ –ì–ê–ô–î –ü–û –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ –†–ï–§–ï–†–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´

## üìã –ß–¢–û –ù–£–ñ–ù–û –ü–†–û–¢–ï–°–¢–ò–†–û–í–ê–¢–¨:

1. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –ø–æ —Å—Å—ã–ª–∫–µ
2. ‚úÖ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ 10% –æ—Ç –¥–µ–ø–æ–∑–∏—Ç–∞
3. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ –±–æ—Ç–µ:
   - Referral balance (—Å—É–º–º–∞ –≤—Å–µ—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤)
   - Deposited (–¥–µ–ø–æ–∑–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞)
   - Your Profit (–∑–∞—Ä–∞–±–æ—Ç–æ–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞)

---

## üöÄ –°–ü–û–°–û–ë 1: –¢–ï–°–¢–û–í–´–ô –°–ö–†–ò–ü–¢ (–ë–ï–ó –†–ï–ê–õ–¨–ù–û–ì–û –î–ï–ü–û–ó–ò–¢–ê)

### **–®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**

```bash
ssh root@77.239.125.70
cd /var/www/duo

# –°–∫–∞—á–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–¥
git pull origin main
```

### **–®–∞–≥ 2: –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ—Ñ–µ—Ä–∞–ª–∞**

1. –ó–∞–π–¥–∏ –≤ –±–æ—Ç–∞ –∫–∞–∫ **–ü–ê–†–¢–ù–ï–†** (—Ç–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç)
2. –ü–µ—Ä–µ–π–¥–∏ –≤ Profile ‚Üí —Å–∫–æ–ø–∏—Ä—É–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é —Å—Å—ã–ª–∫—É
3. –ó–∞–π–¥–∏ –≤ –±–æ—Ç–∞ —Å **–î–†–£–ì–û–ì–û** –∞–∫–∫–∞—É–Ω—Ç–∞ –ø–æ —ç—Ç–æ–π —Å—Å—ã–ª–∫–µ
4. –ù–∞–∂–º–∏ /start

**–ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏:**
```bash
pm2 logs duo-bot | grep "Referral registered"
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: ‚úÖ Referral registered: USER_ID -> PARTNER_ID
```

### **–®–∞–≥ 3: –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç**

```bash
cd /var/www/duo/server

# –í–ê–ñ–ù–û: –ó–∞–º–µ–Ω–∏ USER_ID –Ω–∞ ID —Ä–µ—Ñ–µ—Ä–∞–ª–∞!
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π —Å–∫—Ä–∏–ø—Ç:
nano test-referral-deposit.js
# –ò–∑–º–µ–Ω–∏ —Å—Ç—Ä–æ–∫—É: const REFERRAL_USER_ID = '1889923046';

# –ó–∞–ø—É—Å—Ç–∏:
node test-referral-deposit.js
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –†–ï–§–ï–†–ê–õ–¨–ù–û–ô –°–ò–°–¢–ï–ú–´
=====================================

üìã –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ç–µ—Å—Ç–∞:
   –†–µ—Ñ–µ—Ä–∞–ª: 1889923046
   –î–µ–ø–æ–∑–∏—Ç: 1000‚ÇΩ
   –û–∂–∏–¥–∞–µ–º—ã–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞: 100‚ÇΩ (10%)

‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ –ë–î

üîç –®–∞–≥ 1: –ü–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞...
‚úÖ –ù–∞–π–¥–µ–Ω –ø–∞—Ä—Ç–Ω–µ—Ä: 6147555067

üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –î–û –¥–µ–ø–æ–∑–∏—Ç–∞:
   –ü–∞—Ä—Ç–Ω–µ—Ä 6147555067:
   - Earnings: 0‚ÇΩ
   - Total deposits: 0‚ÇΩ

   –†–µ—Ñ–µ—Ä–∞–ª 1889923046:
   - Total deposits: 0‚ÇΩ
   - Total earnings (–ø–∞—Ä—Ç–Ω–µ—Ä–∞): 0‚ÇΩ

üí∞ –®–∞–≥ 2: –°–∏–º—É–ª—è—Ü–∏—è –¥–µ–ø–æ–∑–∏—Ç–∞ 1000‚ÇΩ...

‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ä—Ç–Ω–µ—Ä–∞
‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ –≤ timeline

üìä –°–æ—Å—Ç–æ—è–Ω–∏–µ –ü–û–°–õ–ï –¥–µ–ø–æ–∑–∏—Ç–∞:
   –ü–∞—Ä—Ç–Ω–µ—Ä 6147555067:
   - Earnings: 100‚ÇΩ (+100‚ÇΩ)
   - Total deposits: 1000‚ÇΩ (+1000‚ÇΩ)

   –†–µ—Ñ–µ—Ä–∞–ª 1889923046:
   - Total deposits: 1000‚ÇΩ
   - Total earnings (–ø–∞—Ä—Ç–Ω–µ—Ä–∞): 100‚ÇΩ

‚úÖ –¢–ï–°–¢ –ó–ê–í–ï–†–®–ï–ù –£–°–ü–ï–®–ù–û!

üìã –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±–æ—Ç–µ:
   1. Referral balance = 1000‚ÇΩ
   2. Deposited (1889923046) = 1000‚ÇΩ
   3. Your Profit = 100‚ÇΩ
```

### **–®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –±–æ—Ç–µ**

–ó–∞–π–¥–∏ –≤ –±–æ—Ç–∞ –∫–∞–∫ **–ü–ê–†–¢–ù–ï–†** ‚Üí Profile:

```
Referral balance: 1000.00‚ÇΩ  ‚Üê –°—É–º–º–∞ –≤—Å–µ—Ö –¥–µ–ø–æ–∑–∏—Ç–æ–≤
Invited: 1

dev_fenomen
Deposited | 1000.00‚ÇΩ       ‚Üê –î–µ–ø–æ–∑–∏—Ç—ã —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞
Your Profit: 100.00‚ÇΩ        ‚Üê –¢–≤–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ (10%)
```

---

## üî• –°–ü–û–°–û–ë 2: –†–ï–ê–õ–¨–ù–´–ô –î–ï–ü–û–ó–ò–¢ (—á–µ—Ä–µ–∑ Payment API)

### **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API –±–∞–ª–∞–Ω—Å–æ–≤:**

```bash
ssh root@77.239.125.70
cd /var/www/duo

# –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å —Ä–µ—Ñ–µ—Ä–∞–ª–∞ –Ω–∞–ø—Ä—è–º—É—é –≤ –ë–î:
sqlite3 bot/autoshop/tgbot/data/database.db

# –í SQLite:
UPDATE storage_users 
SET user_balance = user_balance + 1000 
WHERE user_id = 1889923046;

.quit
```

–ó–∞—Ç–µ–º **–≤ –±–æ—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª–∞** –∏–≥—Ä–∞–π –≤ –ª—é–±—É—é –∏–≥—Ä—É –∏ –ø—Ä–æ–∏–≥—Ä–∞–π –¥–µ–Ω—å–≥–∏ - –ø–∞—Ä—Ç–Ω–µ—Ä –ø–æ–ª—É—á–∏—Ç 10%.

---

## üßπ –û–¢–ö–ê–¢ –¢–ï–°–¢–ê (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–±—Ä–æ—Å–∏—Ç—å):

```bash
ssh root@77.239.125.70
cd /var/www/duo/server

# –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:
node clear-referral-data.js
# –í–≤–µ–¥–∏: yes
```

---

## ‚úÖ CHECKLIST –ü–†–û–í–ï–†–ö–ò:

–ü–æ—Å–ª–µ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—å:

- [ ] Referral balance –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **—Å—É–º–º—É –¥–µ–ø–æ–∑–∏—Ç–æ–≤** (1000‚ÇΩ)
- [ ] Deposited –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–¥–µ–ø–æ–∑–∏—Ç –∏–≥—Ä–æ–∫–∞** (1000‚ÇΩ)
- [ ] Your Profit –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–∑–∞—Ä–∞–±–æ—Ç–æ–∫ 10%** (100‚ÇΩ)
- [ ] –ö–æ–º–∞–Ω–¥–∞ `/my_referrals` —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è**
- [ ] Toast –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Å—ã–ª–∫–∏ **–Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è**
- [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞–∫ **‚ÇΩ** (–Ω–µ $)

---

## üêõ –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢:

### **Referral balance = 0.00P:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å API:
curl http://77.239.125.70:3000/api/referral/PARTNER_ID

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
# { "totalDeposits": 1000, "totalEarnings": 100, ... }
```

### **Deposited = 0.00P:**

```bash
# –ü—Ä–æ–≤–µ—Ä—å –ë–î:
sqlite3 server/data/database.db
SELECT * FROM referrals WHERE referral_user_id = 'USER_ID';
# –ü—Ä–æ–≤–µ—Ä—å total_deposits
```

### **–õ–æ–≥–∏ –±–æ—Ç–∞:**

```bash
pm2 logs duo-bot --lines 50 | grep -i referral
```

---

## üìù –ü–†–ò–ú–ï–ß–ê–ù–ò–Ø:

- –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç **–ù–ï** –≤—ã–∑—ã–≤–∞–µ—Ç API `/add-earnings` - –æ–Ω –Ω–∞–ø—Ä—è–º—É—é –æ–±–Ω–æ–≤–ª—è–µ—Ç –ë–î
- –≠—Ç–æ **–±–µ–∑–æ–ø–∞—Å–Ω–æ** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ú–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
- –ò—Å–ø–æ–ª—å–∑—É–π `clear-referral-data.js` —á—Ç–æ–±—ã —Å–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë

---

## üéØ –ò–¢–û–ì:

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ —Ç—ã —É–≤–∏–¥–∏—à—å:
```
Referral balance: 1000.00‚ÇΩ  ‚Üê –û–±—â–∞—è —Å—É–º–º–∞ –¥–µ–ø–æ–∑–∏—Ç–æ–≤ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
dev_fenomen
Deposited | 1000.00‚ÇΩ       ‚Üê –î–µ–ø–æ–∑–∏—Ç—ã —ç—Ç–æ–≥–æ –∏–≥—Ä–æ–∫–∞
Your Profit: 100.00‚ÇΩ        ‚Üê –¢–≤–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫ (10%)
```

–ì–æ—Ç–æ–≤–æ! üéâ
