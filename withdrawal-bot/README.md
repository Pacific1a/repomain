# Withdrawal Bot

Telegram –±–æ—Ç –¥–ª—è —Ä—É—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ –∏–∑ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã DuoPartners.

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
cd withdrawal-bot
npm install
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª –∏–∑ `.env.example`:
```bash
cp .env.example .env
```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

### WITHDRAWAL_BOT_TOKEN
–°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather:
```
/newbot
–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: DuoPartners Withdrawal Bot
–í–≤–µ–¥–∏—Ç–µ username: duo_withdrawal_bot
```
–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ `.env`

### ADMIN_IDS
–£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π Telegram ID:
- –ù–∞–ø–∏—à–∏—Ç–µ @userinfobot
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –≤ `.env`
- –î–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–¥–º–∏–Ω–æ–≤: `123456789,987654321`

### BOT_SECRET
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É:
```bash
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –∂–µ —Å–µ–∫—Ä–µ—Ç –≤ `server/.env`:
```
WITHDRAWAL_BOT_SECRET=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç_–∑–¥–µ—Å—å
```

### SERVER_API_URL
URL –≤–∞—à–µ–≥–æ –ø–∞—Ä—Ç–Ω—ë—Ä—Å–∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
- –õ–æ–∫–∞–ª—å–Ω–æ: `http://localhost:3001`
- –ü—Ä–æ–¥–∞–∫—à–Ω: `https://duopartners.xyz/api`

## üèÉ –ó–∞–ø—É—Å–∫

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (—Å auto-reload):
```bash
npm run dev
```

### –ü—Ä–æ–¥–∞–∫—à–Ω:
```bash
npm start
```

### PM2 (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):
```bash
pm2 start index.js --name withdrawal-bot
pm2 save
```

## üìù –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –ø—Ä–æ—Ö–æ–¥–∏—Ç 2FA –Ω–∞ —Å–∞–π—Ç–µ –∏ —Å–æ–∑–¥–∞—ë—Ç –∑–∞—è–≤–∫—É –Ω–∞ –≤—ã–≤–æ–¥
2. **–°–µ—Ä–≤–µ—Ä** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—è–≤–∫—É –≤ —ç—Ç–æ–≥–æ –±–æ—Ç–∞
3. **–ê–¥–º–∏–Ω—ã** –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏:
   - ‚úÖ –û–¥–æ–±—Ä–∏—Ç—å ‚Üí –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–±–Ω—É–ª—è–µ—Ç—Å—è
   - ‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å ‚Üí –±–∞–ª–∞–Ω—Å –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç—Å—è
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (—Ä–µ—Ñ–µ—Ä–∞–ª—ã, –∑–∞—Ä–∞–±–æ—Ç–æ–∫)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ë–æ—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `X-Bot-Secret` –∑–∞–≥–æ–ª–æ–≤–æ–∫
- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã (ADMIN_IDS) –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∑–∞—è–≤–∫–∏
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

```
üÜï –ù–û–í–ê–Ø –ó–ê–Ø–í–ö–ê –ù–ê –í–´–í–û–î

üí∞ –°—É–º–º–∞: 1000‚ÇΩ

üë§ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ:
‚îú ID: 123
‚îú Email: user@example.com
‚îú Telegram: @username

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
‚îú –†–µ—Ñ–µ—Ä–∞–ª–æ–≤: 5
‚îú –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ: 3000‚ÇΩ

üí≥ USDT TRC20 –∞–¥—Ä–µ—Å:
TXxx...xxx

üÜî –ó–∞—è–≤–∫–∞ #123
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã

- `/start` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞

## üìÅ API Endpoints

### POST /api/withdrawal
–ü—Ä–∏—ë–º –∑–∞—è–≤–∫–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π)

Headers:
```
X-Bot-Secret: –≤–∞—à_—Å–µ–∫—Ä–µ—Ç
```

Body:
```json
{
  "requestId": 123,
  "userId": 456,
  "email": "user@example.com",
  "telegram": "@username",
  "amount": 1000,
  "usdtAddress": "TXxx...xxx",
  "referralsCount": 5,
  "totalEarnings": 3000
}
```

## üîß Troubleshooting

### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
node -e "console.log(process.env.WITHDRAWAL_BOT_TOKEN)" 

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç .env (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
WITHDRAWAL_BOT_TOKEN=—Ç–æ–∫–µ–Ω_–±–µ–∑_–ø—Ä–æ–±–µ–ª–æ–≤
```

### –ê–¥–º–∏–Ω—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID –∞–¥–º–∏–Ω–æ–≤
node -e "console.log(process.env.ADMIN_IDS.split(','))"

# ID –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —á–∏—Å–ª–∞–º–∏ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤
ADMIN_IDS=123456789,987654321
```

### –û—à–∏–±–∫–∞ "Invalid secret"
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `BOT_SECRET` –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –≤:
- `withdrawal-bot/.env`
- `server/.env` (–∫–∞–∫ `WITHDRAWAL_BOT_SECRET`)

## üìú –õ–æ–≥–∏

–ë–æ—Ç –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è:
```
‚úÖ –ó–∞—è–≤–∫–∞ #123 –æ–¥–æ–±—Ä–µ–Ω–∞ –∞–¥–º–∏–Ω–æ–º @admin
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID: 456
   –°—É–º–º–∞: 1000‚ÇΩ
   –ë–∞–ª–∞–Ω—Å –æ–±–Ω—É–ª—ë–Ω: 1500‚ÇΩ ‚Üí 0‚ÇΩ

‚ùå –ó–∞—è–≤–∫–∞ #124 –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ –∞–¥–º–∏–Ω–æ–º @admin
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ID: 457
   –°—É–º–º–∞: 500‚ÇΩ
   –ë–∞–ª–∞–Ω—Å –ù–ï –∏–∑–º–µ–Ω—ë–Ω
```

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
git pull origin main
cd withdrawal-bot
npm install
pm2 restart withdrawal-bot
```
