# üéâ –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø AUTOSHOP –° MINI APP - –ì–û–¢–û–í–û!

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:

### 1. **Autoshop –±–æ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω** ‚úÖ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ API —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- ‚úÖ –ë–∞–ª–∞–Ω—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ Mini App
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `aiohttp` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 2. **–ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã —Å–æ–∑–¥–∞–Ω—ã** ‚úÖ
- ‚úÖ `miniapp-balance-sync.js` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ `transactions-live.js` - –∂–∏–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏

### 3. **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** ‚úÖ
- ‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ `.balance-1` (—Ä—É–±–ª–∏ –∏ —Ñ–∏—à–∫–∏)
- ‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ `.text-wrapper-4` (–ø—Ä–æ—Ñ–∏–ª—å)
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ `.transaction` —Å –±–ª–æ–∫–∞–º–∏ `.transaction-2`
- ‚úÖ –ü–æ–∫–∞–∑ —Ç–æ–ª—å–∫–æ 3 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π + –∫–Ω–æ–ø–∫–∞ "Show available"

---

## üöÄ –£–°–¢–ê–ù–û–í–ö–ê:

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ autoshop

```bash
cd C:\Users\dev_fenomen\Desktop\bot\autoshop
pip install -r requirements.txt
```

–≠—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç `aiohttp` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ —Å–µ—Ä–≤–µ—Ä—É Mini App.

---

### –®–∞–≥ 2: –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –≤ index.html

–û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à `index.html` Mini App –∏ **–ø–µ—Ä–µ–¥ `</body>`** –¥–æ–±–∞–≤—å—Ç–µ:

```html
<!-- Socket.IO –¥–ª—è WebSocket (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!) -->
<script src="https://cdn.socket.io/4.6.0/socket.io.min.js"></script>

<!-- –ù–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã -->
<script src="miniapp-balance-sync.js"></script>
<script src="transactions-live.js"></script>

</body>
```

---

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL —Å–µ—Ä–≤–µ—Ä–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `autoshop/tgbot/routers/user/user_transactions.py` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```python
SERVER_URL = "https://telegram-games-plkj.onrender.com"  # –í–∞—à —Å–µ—Ä–≤–µ—Ä
```

–ï—Å–ª–∏ –≤–∞—à —Å–µ—Ä–≤–µ—Ä –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ - –∑–∞–º–µ–Ω–∏—Ç–µ.

---

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å—ë

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 - –°–µ—Ä–≤–µ—Ä Mini App:**
```bash
cd C:\Users\dev_fenomen\Desktop\bot\server
npm start
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 - Autoshop –±–æ—Ç:**
```bash
cd C:\Users\dev_fenomen\Desktop\bot\autoshop
python main.py
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï:

### 1. –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
3. –í—ã–±–µ—Ä–∏—Ç–µ **"üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"**
4. –í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 100)
5. –í—ã–±–µ—Ä–∏—Ç–µ **"üåµ CactusPay"**
6. –û–ø–ª–∞—Ç–∏—Ç–µ –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–ø–ª–∞—Ç—É

**–û–∂–∏–¥–∞–µ–º–æ–µ:**
- –í –ª–æ–≥–∞—Ö –±–æ—Ç–∞:
  ```
  ‚úÖ Mini App balance updated for 1889923046: 100.0‚ÇΩ
  ‚úÖ Transaction notification sent for 1889923046
  ```

- –í Mini App:
  - –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
  - –ü–æ—è–≤–∏—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "+100‚ÇΩ"
  - –í –ø—Ä–æ—Ñ–∏–ª–µ –¥–æ–±–∞–≤–∏—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è

---

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–û—Ç–∫—Ä–æ–π—Ç–µ Mini App —Å –∫–æ–Ω—Å–æ–ª—å—é (F12):

```
üí∞ Mini App Balance Sync initializing...
‚úÖ Telegram ID: 1889923046
üí∞ Balance loaded: {rubles: 100, chips: 0}
üîÑ Updating visual balance: {rubles: 100, chips: 0}
‚úÖ Visual updated: 100‚ÇΩ, 0 chips
‚úÖ WebSocket connected
üìú Transactions List initializing...
‚úÖ Transaction container found
‚úÖ Loaded 1 transactions
‚úÖ Rendered 1 transactions
```

---

## üìä –ö–ê–ö –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢:

### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** ‚Üí –û–ø–ª–∞—á–∏–≤–∞–µ—Ç –≤ autoshop –±–æ—Ç–µ
2. **Autoshop** ‚Üí –í—ã–∑—ã–≤–∞–µ—Ç `update_miniapp_balance()`
3. **–§—É–Ω–∫—Ü–∏—è** ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä: `/api/balance/{id}/add`
4. **–°–µ—Ä–≤–µ—Ä** ‚Üí –û–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å + –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç WebSocket —Å–æ–±—ã—Ç–∏–µ
5. **Mini App** ‚Üí –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤–∏–∑—É–∞–ª—å–Ω–æ

### –í–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:

**–ë–ª–æ–∫ `.balance-1`:**
```html
<div class="balance-1">
    <div class="group-ico-1">100.00 <img...></div>  <!-- –†—É–±–ª–∏ -->
    <div class="group-ico-1"><span>0</span><img...></div>  <!-- –§–∏—à–∫–∏ -->
</div>
```

**–ë–ª–æ–∫ `.text-wrapper-4` (–ø—Ä–æ—Ñ–∏–ª—å):**
```html
<div class="text-wrapper-4">100.00</div>
```

**–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ `.transaction-2`:**
```html
<div class="transaction-2">
    <div class="div-2">
        <div class="text-wrapper-11">Nov 25, 3:45 PM</div>
        <div class="text-wrapper-10">CactusPay</div>
    </div>
    <div class="element-2">
        <div class="text-wrapper-12">+100‚ÇΩ</div>
    </div>
</div>
```

---

## üé® –û–°–û–ë–ï–ù–ù–û–°–¢–ò:

### 1. –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞

- –ë–∞–ª–∞–Ω—Å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —á–µ—Ä–µ–∑ WebSocket –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ

### 2. –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

- –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "Show available" - –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ
- –°–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ –¥–∞—Ç–µ (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏)

### 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

- –ü—Ä–∏ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "+100‚ÇΩ"
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å—á–µ–∑–∞–µ—Ç —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã

---

## üîç –û–¢–õ–ê–î–ö–ê:

### –ï—Å–ª–∏ –±–∞–ª–∞–Ω—Å –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
```javascript
// –î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
üí∞ Mini App Balance Sync initializing...
‚úÖ Telegram ID: ...
üí∞ Balance loaded: {...}
```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ autoshop –±–æ—Ç–∞:**
```
‚úÖ Mini App balance updated for ...
‚úÖ Transaction notification sent for ...
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
curl http://localhost:3000/api/balance/1889923046
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å: {"rubles":100,"chips":0}
```

---

### –ï—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–ª–æ–∫ `.transaction` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ HTML**

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å:**
```javascript
// –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
üìú Transactions List initializing...
‚úÖ Transaction container found
‚úÖ Loaded X transactions
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π:**
```bash
curl http://localhost:3000/api/transactions/1889923046
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å –º–∞—Å—Å–∏–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```

---

## üìÅ –§–ê–ô–õ–´:

### –û–±–Ω–æ–≤–ª–µ–Ω–æ:
- ‚úÖ `autoshop/tgbot/routers/user/user_transactions.py` - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ API
- ‚úÖ `autoshop/requirements.txt` - –¥–æ–±–∞–≤–ª–µ–Ω aiohttp

### –°–æ–∑–¥–∞–Ω–æ:
- ‚úÖ `miniapp-balance-sync.js` - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –±–∞–ª–∞–Ω—Å–∞
- ‚úÖ `transactions-live.js` - —Å–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ `FINAL_INTEGRATION_AUTOSHOP.md` - —ç—Ç–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –£–∂–µ –±—ã–ª–æ:
- ‚úÖ `server/server.js` - API —Å–µ—Ä–≤–µ—Ä (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ `global-balance.js` - –≥–ª–æ–±–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
- ‚úÖ `config.js` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

---

## ‚öôÔ∏è –ù–ê–°–¢–†–û–ô–ö–ò:

### –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –¥—Ä—É–≥–æ–º URL:

**–í `autoshop/tgbot/routers/user/user_transactions.py`:**
```python
SERVER_URL = "https://your-server.com"  # –ò–∑–º–µ–Ω–∏—Ç–µ
```

**–í `config.js` (–µ—Å–ª–∏ –µ—Å—Ç—å):**
```javascript
window.GAME_SERVER_URL = 'https://your-server.com';
```

---

## üéØ –ß–ï–ö–õ–ò–°–¢:

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `aiohttp`: `pip install -r requirements.txt`
- [ ] –°–∫—Ä–∏–ø—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `index.html`
- [ ] Socket.IO –ø–æ–¥–∫–ª—é—á–µ–Ω
- [ ] URL —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- [ ] Autoshop –±–æ—Ç –∑–∞–ø—É—â–µ–Ω
- [ ] –°–µ—Ä–≤–µ—Ä Mini App –∑–∞–ø—É—â–µ–Ω
- [ ] –¢–µ—Å—Ç –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ—à–µ–ª
- [ ] –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–∏–ª—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ
- [ ] –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –ø–æ—è–≤–∏–ª–∞—Å—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–∫–∞–∑–∞–ª–æ—Å—å

---

## üéâ –ò–¢–û–ì:

**–¢–µ–ø–µ—Ä—å —É –≤–∞—Å:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã –≤ autoshop –±–æ—Ç–µ
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–æ –≤—Å–µ—Ö –±–ª–æ–∫–∞—Ö `.balance-1` –∏ `.text-wrapper-4`
- ‚úÖ –ñ–∏–≤—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Å –∫–Ω–æ–ø–∫–æ–π "Show available"
- ‚úÖ WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏

---

**üöÄ –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ!**
