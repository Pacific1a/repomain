Проблема:

Loader показывается повторно при каждом переходе на главную страницу (и в браузере, и в мини-аппе)
Loader исчезает слишком быстро, нужно минимум 10 секунд показа
sessionStorage не работает как ожидалось

Задача:
Сделать loader который:

Показывается минимум 10 секунд при первом открытии приложения
НЕ показывается при повторных переходах на главную страницу в рамках одной сессии
Сбрасывается только при полном закрытии/перезагрузке приложения

Решение:
javascript// В корневом компоненте App.js (НЕ в компоненте страницы!)
const [appInitialized, setAppInitialized] = useState(false);
const [showLoader, setShowLoader] = useState(true);

useEffect(() => {
  // Этот эффект выполнится ОДИН раз при монтировании App
  const initializeApp = async () => {
    const startTime = Date.now();
    
    // Загружаем все ресурсы
    await Promise.all([
      // Загрузка картинок
      loadImages(),
      // Другие начальные запросы к серверу
      fetchInitialData()
    ]);
    
    // Вычисляем сколько прошло времени
    const elapsedTime = Date.now() - startTime;
    const remainingTime = Math.max(0, 10000 - elapsedTime); // 10 секунд минимум
    
    // Ждем оставшееся время если загрузка была быстрой
    setTimeout(() => {
      setShowLoader(false);
      setAppInitialized(true);
    }, remainingTime);
  };
  
  initializeApp();
}, []); // Пустой массив зависимостей - выполнится ОДИН раз

// В компоненте главной страницы НЕ должно быть логики loader
// Loader должен быть в App.js:
return (
  <>
    {showLoader && <LoaderComponent />}
    {appInitialized && (
      <Router>
        {/* Ваши страницы */}
      </Router>
    )}
  </>
);
Ключевые моменты:

Loader в App.js, а НЕ в компоненте страницы
useEffect с пустым [] - выполнится только один раз при монтировании приложения
Минимум 10 секунд гарантирован через setTimeout
appInitialized флаг предотвращает рендер страниц до окончания загрузки
При навигации App.js не перемонтируется, поэтому loader не показывается повторно