# üîß –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º Roll –∏–≥—Ä—ã

## –ü—Ä–æ–±–ª–µ–º–∞ 1: WebSocket –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

### –°–∏–º–ø—Ç–æ–º—ã:
```
WebSocket connection to 'wss://telegram-games-plkj.onrender.com/socket.io/' failed
‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: websocket error
```

### –†–µ—à–µ–Ω–∏—è:

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
```bash
cd server
npm start
```
–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://localhost:3000`

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Render —Å–µ—Ä–≤–µ—Ä
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://telegram-games-plkj.onrender.com
2. –î–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
3. –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä "—Å–ø–∏—Ç" - –ø–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ –æ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è
4. Render –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã –∑–∞—Å—ã–ø–∞—é—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

#### –í–∞—Ä–∏–∞–Ω—Ç –í: –ò–∑–º–µ–Ω–∏—Ç—å URL —Å–µ—Ä–≤–µ—Ä–∞
–í —Ñ–∞–π–ª–µ `config.js` –∏–∑–º–µ–Ω–∏—Ç–µ:
```javascript
window.GAME_SERVER_URL = 'https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.onrender.com';
```

## –ü—Ä–æ–±–ª–µ–º–∞ 2: –¢–æ–ª—å–∫–æ 1 –∏–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è

### –ü—Ä–∏—á–∏–Ω–∞:
–í—Å–µ –∏–≥—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π `userId: 123456789` (—Ç–µ—Å—Ç–æ–≤—ã–π)

### –†–µ—à–µ–Ω–∏–µ:
1. **–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram Mini App**, –∞ –Ω–µ –±—Ä–∞—É–∑–µ—Ä –Ω–∞–ø—Ä—è–º—É—é
2. Telegram –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∏—Ç —Å–≤–æ–π ID

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
console.log(window.TelegramUserData);
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```javascript
{
  id: 123456789,  // ‚Üê –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ Telegram
  first_name: "–ò–º—è",
  photo_url: "https://..."
}
```

–ï—Å–ª–∏ `id: 123456789` - —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º, –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ Telegram.

## –ü—Ä–æ–±–ª–µ–º–∞ 3: –ê–≤–∞—Ç–∞—Ä–∫–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–æ–ª–µ—Å–∞

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:
- –†–∞–¥–∏—É—Å —É–º–µ–Ω—å—à–µ–Ω —Å 55 –¥–æ 40
- –ö–æ–ª–µ—Å–æ —É–≤–µ–ª–∏—á–µ–Ω–æ –¥–æ 250px
- –ê–≤–∞—Ç–∞—Ä–∫–∏ 25-45px

### –ï—Å–ª–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –Ω–µ –≤–Ω—É—Ç—Ä–∏:
–í `wheel-game.js` –∏–∑–º–µ–Ω–∏—Ç–µ:
```javascript
const radius = 40; // –ü–æ–ø—Ä–æ–±—É–π—Ç–µ 35 –∏–ª–∏ 30
```

## –ü—Ä–æ–±–ª–µ–º–∞ 4: –°–µ—Ä–≤–µ—Ä —á–∞—Å—Ç–æ "—É–º–∏—Ä–∞–µ—Ç"

### –ü—Ä–∏—á–∏–Ω–∞:
Render –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω:
- –°–µ—Ä–≤–µ—Ä –∑–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 750 —á–∞—Å–æ–≤ –≤ –º–µ—Å—è—Ü

### –†–µ—à–µ–Ω–∏—è:

#### –í—Ä–µ–º–µ–Ω–Ω–æ–µ:
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.onrender.com –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ–∫–∞ —Å–µ—Ä–≤–µ—Ä "–ø—Ä–æ—Å–Ω–µ—Ç—Å—è"
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–≥—Ä—ã

#### –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ:
1. **Upgrade –Ω–∞ Render** ($7/–º–µ—Å—è—Ü) - —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç–∏–Ω–≥:**
   - Railway.app (–±–µ—Å–ø–ª–∞—Ç–Ω–æ $5 –∫—Ä–µ–¥–∏—Ç)
   - Fly.io (–±–µ—Å–ø–ª–∞—Ç–Ω–æ 3 VM)
   - Heroku (–ø–ª–∞—Ç–Ω–æ)

#### Keep-alive —Å–∫—Ä–∏–ø—Ç:
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `keep-alive.js`:
```javascript
setInterval(() => {
  fetch('https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.onrender.com/api/health')
    .then(() => console.log('‚úÖ –°–µ—Ä–≤–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω'))
    .catch(() => console.log('‚ùå –°–µ—Ä–≤–µ—Ä —Å–ø–∏—Ç'));
}, 5 * 60 * 1000); // –ö–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
```

## –ü—Ä–æ–±–ª–µ–º–∞ 5: –ù–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –∏–∑ Telegram

### –ü—Ä–æ–≤–µ—Ä–∫–∞:
```javascript
console.log(window.TelegramUserData.photo_url);
```

### –ï—Å–ª–∏ `null` –∏–ª–∏ `undefined`:
1. Telegram –Ω–µ –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç `photo_url`
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–µ –∏–º–µ—Ç—å –∞–≤–∞—Ç–∞—Ä–∫–∏
3. –ù—É–∂–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤ Bot Father

### –†–µ—à–µ–Ω–∏–µ:
–ê–≤–∞—Ç–∞—Ä–∫–∏ –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ —Ü–≤–µ—Ç–Ω—ã–µ –∫—Ä—É–≥–∏ —Å –∏–Ω–∏—Ü–∏–∞–ª–∞–º–∏:
```javascript
// –í wheel-game.js —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
if (photoUrl && photoUrl.trim() !== '') {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ç–æ
} else {
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª –Ω–∞ —Ü–≤–µ—Ç–Ω–æ–º —Ñ–æ–Ω–µ
}
```

## –ë—ã—Å—Ç—Ä–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
window.GameWebSocket?.connected
// true = –ø–æ–¥–∫–ª—é—á–µ–Ω, false/undefined = –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–≥—Ä–æ–∫–æ–≤:
```javascript
window.rollGame?.players()
// –î–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –º–∞—Å—Å–∏–≤ –∏–≥—Ä–æ–∫–æ–≤
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞:
–û—Ç–∫—Ä–æ–π—Ç–µ: `https://–≤–∞—à-—Å–µ—Ä–≤–µ—Ä.onrender.com/api/stats`
–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å JSON —Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –æ—à–∏–±–∫–∏
3. –û–ø–∏—à–∏—Ç–µ —á—Ç–æ –¥–µ–ª–∞–ª–∏ –ø–µ—Ä–µ–¥ –æ—à–∏–±–∫–æ–π
