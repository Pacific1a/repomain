# üîê –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ë–≠–ö–ê–ü–£ –ü–ï–†–ï–î –ü–ï–†–ï–£–°–¢–ê–ù–û–í–ö–û–ô WINDOWS

## 1Ô∏è‚É£ –°–û–ó–î–ê–¢–¨ –ë–≠–ö–ê–ü –ù–ê –°–ï–†–í–ï–†–ï

–ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É –∏ –∑–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç –±—ç–∫–∞–ø–∞:

```bash
ssh root@your-server
cd /var/www/duo
node server/scripts/backup.js
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç:
- ‚úÖ –ê—Ä—Ö–∏–≤ –ø—Ä–æ–µ–∫—Ç–∞: `backups/backup-YYYY-MM-DD-HH-MM-SS.tar.gz`
- ‚úÖ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –ë–î: `backups/backup-YYYY-MM-DD-HH-MM-SS/database.db`
- ‚úÖ –ö–æ–ø–∏—è .env: `backups/backup-YYYY-MM-DD-HH-MM-SS/.env`
- ‚úÖ –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `backups/backup-YYYY-MM-DD-HH-MM-SS/backup-info.json`

---

## 2Ô∏è‚É£ –°–ö–ê–ß–ê–¢–¨ –ë–≠–ö–ê–ü –õ–û–ö–ê–õ–¨–ù–û –ù–ê WINDOWS

### –í–∞—Ä–∏–∞–Ω—Ç A: –°–∫–∞—á–∞—Ç—å –≤–µ—Å—å –∞—Ä—Ö–∏–≤ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
scp root@your-server:/var/www/duo/backups/backup-*.tar.gz C:\Backups\
```

### –í–∞—Ä–∏–∞–Ω—Ç B: –°–∫–∞—á–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

```bash
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
scp root@your-server:/var/www/duo/server/data/database.db C:\Backups\

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ .env
scp root@your-server:/var/www/duo/server/.env C:\Backups\

# package.json (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏)
scp root@your-server:/var/www/duo/server/package.json C:\Backups\
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –ß–µ—Ä–µ–∑ WinSCP (GUI)

1. –û—Ç–∫—Ä–æ–π WinSCP
2. –ü–æ–¥–∫–ª—é—á–∏—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
3. –°–∫–∞—á–∞–π –ø–∞–ø–∫—É `/var/www/duo/backups/` —Ü–µ–ª–∏–∫–æ–º
4. –°–æ—Ö—Ä–∞–Ω–∏ –≤ `C:\Backups\` –∏–ª–∏ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫

---

## 3Ô∏è‚É£ –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–ê–ô–õ–´ –î–õ–Ø –ë–≠–ö–ê–ü–ê

```bash
# –ö–æ–Ω—Ñ–∏–≥ PM2 (–µ—Å–ª–∏ –µ—Å—Ç—å)
scp root@your-server:/var/www/duo/ecosystem.config.js C:\Backups\

# –õ–æ–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
scp -r root@your-server:/root/.pm2/logs/ C:\Backups\pm2-logs\

# Nginx –∫–æ–Ω—Ñ–∏–≥ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª)
scp root@your-server:/etc/nginx/sites-available/duo C:\Backups\nginx-duo.conf
```

---

## 4Ô∏è‚É£ –ü–†–û–í–ï–†–ò–¢–¨ –ë–≠–ö–ê–ü

–ù–∞ Windows –ø—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª—ã —Å–∫–∞—á–∞–ª–∏—Å—å:

```powershell
dir C:\Backups\
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ `backup-YYYY-MM-DD-HH-MM-SS.tar.gz` (–ø–æ–ª–Ω—ã–π –∞—Ä—Ö–∏–≤)
- ‚úÖ `database.db` (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ `.env` (–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)

---

## 5Ô∏è‚É£ –í–û–°–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï (–ü–û–°–õ–ï –ü–ï–†–ï–£–°–¢–ê–ù–û–í–ö–ò WINDOWS)

### A. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ –∞—Ä—Ö–∏–≤–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

```bash
ssh root@your-server
cd /var/www/duo

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –∞—Ä—Ö–∏–≤ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
# (—á–µ—Ä–µ–∑ scp —Å Windows –ø–æ—Å–ª–µ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∏)

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
node server/scripts/restore.js
```

### B. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é

```bash
# –†–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –∞—Ä—Ö–∏–≤
cd /var/www/duo
tar -xzf backups/backup-YYYY-MM-DD-HH-MM-SS.tar.gz

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ë–î
cp backups/backup-YYYY-MM-DD-HH-MM-SS/database.db server/data/

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å .env
cp backups/backup-YYYY-MM-DD-HH-MM-SS/.env server/

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
cd server
npm install

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
pm2 restart duo-server
pm2 restart duo-bot
```

---

## 6Ô∏è‚É£ –°–ü–ò–°–û–ö –í–°–ï–• –í–ê–ñ–ù–´–• –§–ê–ô–õ–û–í

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û):
- ‚úÖ `server/data/database.db` - –≤—Å—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `server/.env` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- ‚úÖ `bot/.env` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞

### –í–∞–∂–Ω—ã–µ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø):
- ‚úÖ `server/package.json` - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ `ecosystem.config.js` - –∫–æ–Ω—Ñ–∏–≥ PM2
- ‚úÖ –í–µ—Å—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ (–µ—Å—Ç—å –≤ Git, –Ω–æ –±—ç–∫–∞–ø –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç)

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:
- üì¶ `node_modules/` - –º–æ–∂–Ω–æ –Ω–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å, —É—Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è —á–µ—Ä–µ–∑ npm install
- üì¶ –õ–æ–≥–∏ - –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è

---

## 7Ô∏è‚É£ –ë–´–°–¢–†–ê–Ø –ö–û–ú–ê–ù–î–ê –î–õ–Ø –ü–û–õ–ù–û–ì–û –ë–≠–ö–ê–ü–ê

–û–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∑–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫–∞–ø –∏ —Å–∫–∞—á–∞—Ç—å:

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
ssh root@your-server "cd /var/www/duo && node server/scripts/backup.js"

# –°–∫–∞—á–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –±—ç–∫–∞–ø
scp root@your-server:/var/www/duo/backups/backup-*.tar.gz C:\Backups\
```

---

## 8Ô∏è‚É£ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

1. ‚úÖ –°–¥–µ–ª–∞–π –±—ç–∫–∞–ø –ù–ê –°–ï–†–í–ï–†–ï
2. ‚úÖ –°–∫–∞—á–∞–π –Ω–∞ **–≤–Ω–µ—à–Ω–∏–π –¥–∏—Å–∫** –∏–ª–∏ **–æ–±–ª–∞–∫–æ** (–Ω–µ —Ç–æ–ª—å–∫–æ –Ω–∞ –¥–∏—Å–∫ C:)
3. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∞—Ä—Ö–∏–≤ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
4. ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏ –ø–∞—Ä–æ–ª–∏ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –≤ –Ω–∞–¥—ë–∂–Ω–æ–º –º–µ—Å—Ç–µ
5. ‚úÖ –ó–∞–ø–∏—à–∏ IP —Å–µ—Ä–≤–µ—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è SSH

---

## 9Ô∏è‚É£ –ü–û–°–õ–ï –ü–ï–†–ï–£–°–¢–ê–ù–û–í–ö–ò WINDOWS

1. –£—Å—Ç–∞–Ω–æ–≤–∏ Git
2. –£—Å—Ç–∞–Ω–æ–≤–∏ Node.js
3. –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∑–∞–Ω–æ–≤–æ
4. –ó–∞–≥—Ä—É–∑–∏ –ë–î –∏ .env –∏–∑ –±—ç–∫–∞–ø–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ PM2

---

## üÜò –ü–û–ú–û–©–¨

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
- –ë—ç–∫–∞–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `/var/www/duo/backups/`
- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 –±—ç–∫–∞–ø–æ–≤ —Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ú–æ–∂–µ—à—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª—é–±–æ–π –∏–∑ –Ω–∏—Ö —á–µ—Ä–µ–∑ restore.js
