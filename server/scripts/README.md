# Scripts –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è 2FA

## –û—á–∏—Å—Ç–∫–∞ 2FA –¥–∞–Ω–Ω—ã—Ö

### 1. –û—á–∏—Å—Ç–∏—Ç—å 2FA –¥–ª—è –í–°–ï–• –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
cd /var/www/duo/server
node scripts/clear-2fa.js
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: `two_factor_secret = NULL`
- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: `two_factor_enabled = 0`

---

### 2. –û—á–∏—Å—Ç–∏—Ç—å 2FA –¥–ª—è –ö–û–ù–ö–†–ï–¢–ù–û–ì–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
cd /var/www/duo/server
node scripts/clear-2fa-user.js <USER_ID>
```

**–ü—Ä–∏–º–µ—Ä:**
```bash
# –û—á–∏—Å—Ç–∏—Ç—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID = 4
node scripts/clear-2fa-user.js 4
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –£–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `two_factor_secret = NULL`
- –£–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `two_factor_enabled = 0`

---

## –ü–æ—Å–ª–µ –æ—á–∏—Å—Ç–∫–∏

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
pm2 restart duo-server
```

2. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ (Ctrl+Shift+R)

3. –û—Ç–∫—Ä—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ 2FA ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥–∫–ª—é—á–∏—Ç—å 2FA"

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å 2FA –≤ –ª–æ–≥–∞—Ö
pm2 logs duo-server | grep "2FA Status"

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å:
# üìã 2FA Status check: { userId: 4, enabled: false, hasSecret: false }
```
