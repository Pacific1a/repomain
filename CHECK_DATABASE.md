# üîç –ü–†–û–í–ï–†–ö–ê –ë–ê–ó–´ –î–ê–ù–ù–´–• - –ü–û–ß–ï–ú–£ clicks = 0

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

**–ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 200 OK, –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "click counted", –Ω–æ clicks –≤—Å—ë —Ä–∞–≤–Ω–æ 0!**

---

## üß™ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê

### 1. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Render —Å–µ—Ä–≤–µ—Ä–∞

https://dashboard.render.com/ ‚Üí duo-partner ‚Üí **Logs**

**–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞:**

```
‚úÖ Connected to SQLite database at: /opt/render/project/src/site/server/data/database.db
```

**–ï–°–õ–ò –≤–∏–¥–∏—à—å:**
```
‚ùå Connected to SQLite database at: ./database.db
```

**‚Üí –ü–†–û–ë–õ–ï–ú–ê: –ë–∞–∑–∞ –≤ ephemeral storage!**

---

## üéØ –ü–†–ò–ß–ò–ù–ê

### –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ:

**–¢—ã –ù–ï –Ω–∞—Å—Ç—Ä–æ–∏–ª Persistent Disk –Ω–∞ Render!**

–ë–µ–∑ persistent disk:
1. –ë–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ `./database.db` (ephemeral)
2. UPDATE query –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è ‚úÖ
3. clicks –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ ‚úÖ
4. –ù–û –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ú–û–ñ–ï–¢ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å—Å—è
5. –ë–∞–∑–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è ‚Üí clicks = 0 —Å–Ω–æ–≤–∞ ‚ùå

---

## ‚úÖ –†–ï–®–ï–ù–ò–Ø

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Persistent Disk (–¢–†–ï–ë–£–ï–¢ –û–ü–õ–ê–¢–£)

**–°—Ç–æ–∏–º–æ—Å—Ç—å: $7/–º–µ—Å—è—Ü**

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `RENDER_SETUP.md`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL (–ë–ï–°–ü–õ–ê–¢–ù–û)

**Render –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π PostgreSQL!**

–°–ª–µ–¥—É–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `SOLUTION_FREE_TIER.md`

**–Ø –º–æ–≥—É –ø–æ–º–æ—á—å –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å! –°–∫–∞–∂–∏ "–ø–æ–º–æ–≥–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL"**

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Supabase PostgreSQL (–ë–ï–°–ü–õ–ê–¢–ù–û)

1. https://supabase.com/
2. Create project
3. –ü–æ–ª—É—á–∏ connection string
4. –Ø –ø–æ–º–æ–≥—É –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

---

## üî¨ –¢–ï–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò

### –û—Ç–∫—Ä–æ–π Render Shell –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π SSH:

```bash
# –ü—Ä–æ–≤–µ—Ä—å –≥–¥–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
ls -la /opt/render/project/src/site/server/
ls -la /opt/render/project/src/site/server/data/

# –ü—Ä–æ–≤–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –±–∞–∑—ã
sqlite3 ./database.db "SELECT * FROM referral_stats;"
```

**–ï–°–õ–ò:**
- –ë–∞–∑–∞ –≤ `./database.db` ‚Üí ephemeral ‚ùå
- –ë–∞–∑–∞ –≤ `data/database.db` ‚Üí persistent ‚úÖ

### –ü—Ä–æ–≤–µ—Ä—å clicks –≤ –±–∞–∑–µ:

```sql
SELECT user_id, clicks FROM referral_stats WHERE user_id = 1;
```

**–ï–°–õ–ò:**
- clicks = 0 ‚Üí UPDATE –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –±–∞–∑–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è
- clicks > 0 ‚Üí UPDATE —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ

---

## üß™ –¢–ï–°–¢ 2: –ü—Ä–æ–≤–µ—Ä—å GET –∑–∞–ø—Ä–æ—Å

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):

```javascript
fetch('https://duo-partner.onrender.com/api/referral/partner/stats', {
    headers: {
        'Authorization': 'Bearer ' + localStorage.getItem('token')
    }
})
.then(r => r.json())
.then(data => console.log('Stats:', data));
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:**

```json
{
    "success": true,
    "referralCode": "1_ABC123",
    "stats": {
        "clicks": 2,  // <-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0
        "firstDeposits": 0,
        ...
    }
}
```

**–ï–°–õ–ò clicks = 0:**
- –ë–∞–∑–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è (ephemeral storage)
- UPDATE –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –î–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∏–∑ –¥—Ä—É–≥–æ–π —Ç–∞–±–ª–∏—Ü—ã

---

## üîß –ë–´–°–¢–†–´–ô –§–ò–ö–° (–í–†–ï–ú–ï–ù–ù–´–ô)

### –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
cd site/server

# –ò—Å–ø–æ–ª—å–∑—É–π –ª–æ–∫–∞–ª—å–Ω—É—é –±–∞–∑—É
$env:DATABASE_PATH="C:\Users\dev_fenomen\Desktop\duo\site\server\data\database.db"

# –°–æ–∑–¥–∞–π –∞–¥–º–∏–Ω–∞
node create-admin.js

# –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
node server.js
```

–¢–µ–ø–µ—Ä—å –±–∞–∑–∞ –±—É–¥–µ—Ç persistent –ª–æ–∫–∞–ª—å–Ω–æ.

**–¢–µ—Å—Ç:**
1. –ó–∞–ø—É—Å—Ç–∏ –±–æ—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ (–∏–∑–º–µ–Ω–∏ SERVER_URL)
2. –û—Ç–ø—Ä–∞–≤—å /start ref_CODE
3. –ü—Ä–æ–≤–µ—Ä—å clicks –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ

**–ï–°–õ–ò clicks –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ –≤ Render (ephemeral storage)**

---

## üí° –ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø

### –ü–æ—Å–∫–æ–ª—å–∫—É Persistent Disk —Ç—Ä–µ–±—É–µ—Ç –æ–ø–ª–∞—Ç—É:

**‚Üí –ú–ò–ì–†–ò–†–£–ô –ù–ê POSTGRESQL (–ë–ï–°–ü–õ–ê–¢–ù–û)**

**–Ø –ì–û–¢–û–í –ü–û–ú–û–ß–¨!**

1. –°–æ–∑–¥–∞–º PostgreSQL –±–∞–∑—É –Ω–∞ Render (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)
2. –ü–µ—Ä–µ–≤–µ–¥—É –≤–µ—Å—å –∫–æ–¥ —Å SQLite –Ω–∞ PostgreSQL
3. –û–±–Ω–æ–≤–ª—é –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É—é
5. –ó–∞–¥–µ–ø–ª–æ—é

**–í—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: 1-2 —á–∞—Å–∞**

**–ü–û–°–õ–ï –ú–ò–ì–†–ê–¶–ò–ò:**
- ‚úÖ –ë–∞–∑–∞ persistent –Ω–∞–≤—Å–µ–≥–¥–∞
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ
- ‚úÖ Production-ready
- ‚úÖ –õ—É—á—à–µ —á–µ–º SQLite –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- ‚úÖ clicks –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üéØ –ß–¢–û –î–ï–õ–ê–¢–¨ –°–ï–ô–ß–ê–°

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ Render

–ù–∞–π–¥–∏ —Å—Ç—Ä–æ–∫—É —Å "Connected to SQLite database at:"

**–°–∫–æ–ø–∏—Ä—É–π –∏ –ø–æ–∫–∞–∂–∏ –º–Ω–µ!**

### –®–∞–≥ 2: –í—ã–±–µ—Ä–∏ —Ä–µ—à–µ–Ω–∏–µ

**A.** "–Ø –æ–ø–ª–∞—á—É Persistent Disk $7/–º–µ—Å" ‚Üí —Å–ª–µ–¥—É–π RENDER_SETUP.md  
**B.** "–ü–æ–º–æ–≥–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ PostgreSQL (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)" ‚Üí —è –ø–æ–º–æ–≥—É  
**C.** "–ò—Å–ø–æ–ª—å–∑—É–π Supabase" ‚Üí —è –ø–æ–º–æ–≥—É –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å  

---

## üìä –ê–ù–ê–õ–ò–ó –õ–û–ì–û–í

### –¢–≤–æ–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç:

```
Server response status: 200
Server response text: {"success":true,"message":"Referral already registered, click counted","alreadyExists":true}
‚úÖ Referral registered: 1889923046 -> 1
```

**–≠—Ç–æ –∑–Ω–∞—á–∏—Ç:**
- ‚úÖ Webhook —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ Partner –Ω–∞–π–¥–µ–Ω (id=1)
- ‚úÖ UPDATE query –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
- ‚úÖ –û—Ç–≤–µ—Ç 200 OK

**–ù–û clicks –≤—Å—ë —Ä–∞–≤–Ω–æ 0 ‚Üí –ë–∞–∑–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è!**

---

## üî• –ò–¢–û–ì

**–ü–†–û–ë–õ–ï–ú–ê: SQLite –≤ ephemeral storage –Ω–∞ Render Free Tier**

**–†–ï–®–ï–ù–ò–ï: PostgreSQL (–±–µ—Å–ø–ª–∞—Ç–Ω–æ) –∏–ª–∏ Persistent Disk ($7/–º–µ—Å)**

**–°–ö–ê–ñ–ò –ú–ù–ï –ß–¢–û –í–´–ë–ò–†–ê–ï–®–¨ –ò –Ø –ü–û–ú–û–ì–£!** üöÄ

---

**–ß–∏—Ç–∞–π:**
- `SOLUTION_FREE_TIER.md` - –≤—Å–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
- `RENDER_SETUP.md` - –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Persistent Disk (–ø–ª–∞—Ç–Ω–æ)
