root@duos:/var/www/duo# pm2 save
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@duos:/var/www/duo# pm2 status
┌────┬────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name           │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 3  │ duo-bot        │ default     │ 1.0.0   │ fork    │ 0        │ 0      │ 85   │ stopped   │ 0%       │ 0b       │ root     │ disabled │
│ 18 │ duo-casino     │ default     │ 1.0.0   │ fork    │ 633994   │ 7s     │ 0    │ online    │ 0%       │ 86.3mb   │ root     │ disabled │
│ 17 │ duo-partner    │ default     │ 1.0.0   │ fork    │ 633993   │ 7s     │ 0    │ online    │ 0%       │ 75.1mb   │ root     │ disabled │
│ 15 │ duo-tunnel     │ default     │ N/A     │ fork    │ 0        │ 0      │ 0    │ stopped   │ 0%       │ 0b       │ root     │ disabled │
└────┴────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo# pm2 logs duo-casino --lines 20 --nostream | grep "порту"
18|duo-cas | � Сервер запущен на порту 3001
root@duos:/var/www/duo# pm2 logs duo-casino --lines 20 --nostream | grep "PORT"
root@duos:/var/www/duo# pm2 start duo-bot
[PM2] Applying action restartProcessId on app [duo-bot](ids: [ 3 ])
[PM2] [duo-bot](3) ✓
[PM2] Process successfully started
┌────┬────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name           │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 3  │ duo-bot        │ default     │ 1.0.0   │ fork    │ 634066   │ 0s     │ 85   │ online    │ 0%       │ 7.1mb    │ root     │ disabled │
│ 18 │ duo-casino     │ default     │ 1.0.0   │ fork    │ 633994   │ 63s    │ 0    │ online    │ 0%       │ 70.7mb   │ root     │ disabled │
│ 17 │ duo-partner    │ default     │ 1.0.0   │ fork    │ 633993   │ 63s    │ 0    │ online    │ 0%       │ 77.0mb   │ root     │ disabled │
│ 15 │ duo-tunnel     │ default     │ N/A     │ fork    │ 0        │ 0      │ 0    │ stopped   │ 0%       │ 0b       │ root     │ disabled │
└────┴────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo# pm2 start duo-tunnel
[PM2] Applying action restartProcessId on app [duo-tunnel](ids: [ 15 ])
[PM2] [duo-tunnel](15) ✓
[PM2] Process successfully started
┌────┬────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name           │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 3  │ duo-bot        │ default     │ 1.0.0   │ fork    │ 634066   │ 2s     │ 85   │ online    │ 0%       │ 143.8mb  │ root     │ disabled │
│ 18 │ duo-casino     │ default     │ 1.0.0   │ fork    │ 633994   │ 66s    │ 0    │ online    │ 0%       │ 70.8mb   │ root     │ disabled │
│ 17 │ duo-partner    │ default     │ 1.0.0   │ fork    │ 633993   │ 66s    │ 0    │ online    │ 0%       │ 77.0mb   │ root     │ disabled │
│ 15 │ duo-tunnel     │ default     │ N/A     │ fork    │ 634075   │ 0s     │ 0    │ online    │ 0%       │ 9.8mb    │ root     │ disabled │
└────┴────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo# pm2 status
┌────┬────────────────┬─────────────┬─────────┬─────────┬──────────┬────────┬──────┬───────────┬──────────┬──────────┬──────────┬──────────┐
│ id │ name           │ namespace   │ version │ mode    │ pid      │ uptime │ ↺    │ status    │ cpu      │ mem      │ user     │ watching │
├────┼────────────────┼─────────────┼─────────┼─────────┼──────────┼────────┼──────┼───────────┼──────────┼──────────┼──────────┼──────────┤
│ 3  │ duo-bot        │ default     │ 1.0.0   │ fork    │ 634066   │ 5s     │ 85   │ online    │ 0%       │ 148.7mb  │ root     │ disabled │
│ 18 │ duo-casino     │ default     │ 1.0.0   │ fork    │ 633994   │ 68s    │ 0    │ online    │ 0%       │ 71.0mb   │ root     │ disabled │
│ 17 │ duo-partner    │ default     │ 1.0.0   │ fork    │ 633993   │ 68s    │ 0    │ online    │ 0%       │ 77.1mb   │ root     │ disabled │
│ 15 │ duo-tunnel     │ default     │ N/A     │ fork    │ 634075   │ 2s     │ 0    │ online    │ 0%       │ 33.5mb   │ root     │ disabled │
└────┴────────────────┴─────────────┴─────────┴─────────┴──────────┴────────┴──────┴───────────┴──────────┴──────────┴──────────┴──────────┘
root@duos:/var/www/duo# pm2 logs duo-casino --lines 30 --nostream
[TAILING] Tailing last 30 lines for [duo-casino] process (change the value with --lines option)
/root/.pm2/logs/duo-casino-error.log last 30 lines:
18|duo-cas |     at Module.load (node:internal/modules/cjs/loader:1203:32)
18|duo-cas |     at Module._load (node:internal/modules/cjs/loader:1019:12)
18|duo-cas |     at Object.<anonymous> (/usr/lib/node_modules/pm2/lib/ProcessContainerFork.js:33:23)
18|duo-cas |     at Module._compile (node:internal/modules/cjs/loader:1364:14) {
18|duo-cas |   code: 'EADDRINUSE',
18|duo-cas |   errno: -98,
18|duo-cas |   syscall: 'listen',
18|duo-cas |   address: '::',
18|duo-cas |   port: 3000
18|duo-cas | }
18|duo-cas | ⚠️ Partner Webhook disabled: PARTNER_SITE_URL not set
18|duo-cas | ⚠️ Partner site index.html not found at: /var/www/duo/bot/site/index.html
18|duo-cas | Error: listen EADDRINUSE: address already in use :::3000
18|duo-cas |     at Server.setupListenHandle [as _listen2] (node:net:1817:16)
18|duo-cas |     at listenInCluster (node:net:1865:12)
18|duo-cas |     at Server.listen (node:net:1953:7)
18|duo-cas |     at Object.<anonymous> (/var/www/duo/bot/server/server.js:2578:8)
18|duo-cas |     at Module._compile (node:internal/modules/cjs/loader:1364:14)
18|duo-cas |     at Module._extensions..js (node:internal/modules/cjs/loader:1422:10)
18|duo-cas |     at Module.load (node:internal/modules/cjs/loader:1203:32)
18|duo-cas |     at Module._load (node:internal/modules/cjs/loader:1019:12)
18|duo-cas |     at Object.<anonymous> (/usr/lib/node_modules/pm2/lib/ProcessContainerFork.js:33:23)
18|duo-cas |     at Module._compile (node:internal/modules/cjs/loader:1364:14) {
18|duo-cas |   code: 'EADDRINUSE',
18|duo-cas |   errno: -98,
18|duo-cas |   syscall: 'listen',
18|duo-cas |   address: '::',
18|duo-cas |   port: 3000
18|duo-cas | }
18|duo-cas | ⚠️ Partner site index.html not found at: /var/www/duo/bot/site/index.html

/root/.pm2/logs/duo-casino-out.log last 30 lines:
18|duo-cas | ✅ Referral tracker initialized
18|duo-cas | � Socket.IO server initialized
18|duo-cas | � __dirname: /var/www/duo/bot/server
18|duo-cas | � process.cwd(): /var/www/duo
18|duo-cas | � Project root: /var/www/duo/bot
18|duo-cas | ✅ Found bot index.html at: /var/www/duo/bot/index.html
18|duo-cas | � Сайт партнеров раздается из: /var/www/duo/bot/site
18|duo-cas | � Статические файлы бота раздаются из: /var/www/duo/bot
18|duo-cas | ⚠️ MongoDB не настроена (работает без БД - используется JSON хранилище)
18|duo-cas | ✅ Загружено 0 комнат из файла
18|duo-cas | ✅ Referral API endpoints loaded
18|duo-cas | ✅ Partner Webhook enabled: http://localhost:3000
18|duo-cas | ✅ ReferralTracker initialized
18|duo-cas | � Tracked users: 0
18|duo-cas | ✅ Referral tracker initialized
18|duo-cas | � Socket.IO server initialized
18|duo-cas | � __dirname: /var/www/duo/bot/server
18|duo-cas | � process.cwd(): /var/www/duo
18|duo-cas | � Project root: /var/www/duo/bot
18|duo-cas | ✅ Found bot index.html at: /var/www/duo/bot/index.html
18|duo-cas | � Сайт партнеров раздается из: /var/www/duo/bot/site
18|duo-cas | � Статические файлы бота раздаются из: /var/www/duo/bot
18|duo-cas | ⚠️ MongoDB не настроена (работает без БД - используется JSON хранилище)
18|duo-cas | ✅ Загружено 0 комнат из файла
18|duo-cas | ✅ Referral API endpoints loaded
18|duo-cas | � Сервер запущен на порту 3001
18|duo-cas | � WebSocket готов к подключениям
18|duo-cas | � Персистентное хранилище: /var/www/duo/bot/server/data
18|duo-cas | �️ MongoDB: Отключена (используется JSON)
18|duo-cas | � Система ботов Roll будет активирована после первого подключения

root@duos:/var/www/duo# pm2 logs duo-casino --lines 50 --nostream | grep "Referral"
18|duo-cas | ✅ Referral API endpoints loaded
18|duo-cas | ✅ ReferralTracker initialized
18|duo-cas | ✅ Referral tracker initialized
18|duo-cas | ✅ Referral API endpoints loaded
18|duo-cas | ✅ ReferralTracker initialized
18|duo-cas | ✅ Referral tracker initialized
18|duo-cas | ✅ Referral API endpoints loaded
18|duo-cas | ✅ ReferralTracker initialized
18|duo-cas | ✅ Referral tracker initialized
18|duo-cas | ✅ Referral API endpoints loaded
root@duos:/var/www/duo# pm2 save
[PM2] Saving current process list...
[PM2] Successfully saved in /root/.pm2/dump.pm2
root@duos:/var/www/duo# curl -I http://localhost:3001
HTTP/1.1 200 OK
Content-Security-Policy: default-src 'self';script-src 'self' 'unsafe-inline' https://telegram.org https://cdn.socket.io;style-src 'self' 'unsafe-i
nline' https://cdnjs.cloudflare.com https://fonts.googleapis.com;img-src 'self' data: https: http: https://raw.githubusercontent.com https://github
.com;connect-src 'self' https: wss: ws:;font-src 'self' data: https: https://fonts.gstatic.com;object-src 'none';media-src 'self';frame-src 'self';
base-uri 'self';form-action 'self';frame-ancestors 'self';script-src-attr 'none';upgrade-insecure-requests
Cross-Origin-Opener-Policy: same-origin
Cross-Origin-Resource-Policy: same-origin
Origin-Agent-Cluster: ?1
Referrer-Policy: no-referrer
Strict-Transport-Security: max-age=15552000; includeSubDomains
X-Content-Type-Options: nosniff
X-DNS-Prefetch-Control: off
X-Download-Options: noopen
X-Frame-Options: SAMEORIGIN
X-Permitted-Cross-Domain-Policies: none
X-XSS-Protection: 0
Access-Control-Allow-Origin: *
Accept-Ranges: bytes
Cache-Control: public, max-age=0
Last-Modified: Sun, 28 Dec 2025 07:28:56 GMT
ETag: W/"d65e-19b63dc3e3e"
Content-Type: text/html; charset=UTF-8
Content-Length: 54878
Date: Sun, 28 Dec 2025 10:27:06 GMT
Connection: keep-alive
Keep-Alive: timeout=5

root@duos:/var/www/duo#